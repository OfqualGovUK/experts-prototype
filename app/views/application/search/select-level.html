
{% extends "_templates/form-template.html" %}

{% set pageHeading %}
  {% if data.referrer == "subjectSearch"%}
    What qualification levels can you advise on for this subject?
  {% else %}
    What qualification levels can you advise on in this sector?
  {% endif %}
{% endset %}

{% set formAction = "/select-level-answer" %}

{% set captionHeading %}
  {# If they are coming through the sector flow #}
  {% if data.referrer == "sectorSearch" %}
    {{ data.selectedIndustry }}
    {% if data.selectedQualificationSector == "I don't know the qualification type" %}
      {% else %} 
        ({{ data.selectedQualificationSector }})
    {% endif %}
  {# Otherwise they must be coming from the subject search #}
  {% elseif data.referrer == "subjectSearch" %}
    {# If its not an "other" subject, show the subject and qual type/level #}
    {% if data.selectedSubject and data.resultQualType != "Other qualification type" %}
      {{ data.selectedSubject }}
    {# If it is an "other" subject, so just show the subject #}
    {% elseif data.selectedSubject and data.resultQualType == "Other qualification type" %}
      {{ data.resultName }}
      {% if data.selectedQualification == "I don't know the qualification type" %}
        {% else %} 
          ({{ data.selectedQualification }})
        {% endif %}
      {% endif %}
  {% endif %}
{% endset %}

{% block formContent %}

  <span class="govuk-caption-l">{{ captionHeading }}</span>  
  
  {% set otherLevelHtml %}
    {{ govukInput({
      classes: "govuk-!-width-two-thirds",
      label: {
        text: "Provide details (optional)",
        classes: "govuk-label--s"
      }
    } | decorateAttributes(data, "data.selectedLevelOther")) }}
  {% endset -%}

  {% set hintHtml %}
    Select all that apply. Learn more about what <a href="https://www.gov.uk/what-different-qualification-levels-mean/list-of-qualification-levels" class="govuk-link" rel="noreferrer noopener" target="_blank">qualification levels mean (opens in new tab)</a>.
  {% endset %}
  
  {# If they are coming through the select a sector flow #}
  {% if data.referrer == "sectorSearch" %}
  
    {{ govukCheckboxes({
      fieldset: {
        legend: {
          text: pageHeading,
          classes: "govuk-fieldset__legend--l",
          isPgeHeading: false
        }
      },
      hint: {
        html: hintHtml
      },
      items: [
        {
          text: "Entry Level"
        },
        {
          value: "Level 1",
          text: "Level 1",
          hint: {
            text: "First certificate or GCSE - grade 3 or D and below"
          }
        },
        {
          value: "Level 2",
          text: "Level 2",
          checked: true if "GCSE (9 to 1)" in data.selectedQualificationSector or "GCSE (A* to G)" in data.selectedQualificationSector, 
          hint: {
            text: "Intermediate apprenticeship or GCSE - grade 4 or C and above"
          }
        },
        {
          value: "Level 3",
          text: "Level 3",
          checked: true if "GCE A Level" in data.selectedQualificationSector or "GCE AS Level" in data.selectedQualificationSector,
          hint: {
            text: "A/AS level or advanced apprenticeship"
          }
        },
        {
          value: "Level 4",
          text: "Level 4",
          hint: {
            text: "Certificate of higher education (CertHE) or higher apprenticeship"
          }
        },
        {
          value: "Level 5",
          text: "Level 5",
          hint: {
            text: "Diploma of higher education (DipHE) or foundation degree"
          }
        },
        {
          value: "Level 6",
          text: "Level 6",
          hint: {
            text: "Degree apprenticeship, degree with honours, graduate certificate or graduate diploma"
          }
        },
        {
          value: "Level 7",
          text: "Level 7",
          hint: {
            text: "Master’s degree, postgraduate certificate or postgraduate diploma"
          }
        },
        {
          value: "Level 8",
          text: "Level 8",
          _hint: {
            text: "Master’s degree, postgraduate certificate or postgraduate diploma"
          }
        },
        {
          divider: "or"
        },
        {
          value: "I don't know the level",
          text: "I don't know the level",
          behaviour: "exclusive"
        }
      ]
    } | decorateAttributes(data, "data.selectedLevelSector")) }}

  {# else they must be coming through subejct flow #}
  {% else %}

    {{ govukCheckboxes({
      fieldset: {
        legend: {
          text: pageHeading,
          classes: "govuk-fieldset__legend--l",
          isPgeHeading: false
        }
      },
      hint: {
        html: hintHtml
      },
      items: [
        {
          text: "Entry Level"
        },
        {
          value: "Level 1",
          text: "Subject Level 1",
          hint: {
            text: "First certificate or GCSE - grade 3 or D and below"
          }
        },
        {
          value: "Level 2",
          text: "Level 2",
          checked: true if "GCSE (9 to 1)" in data.selectedQualification or "GCSE (A* to G)" in data.selectedQualification, 
          hint: {
            text: "Intermediate apprenticeship or GCSE - grade 4 or C and above"
          }
        },
        {
          value: "Level 3",
          text: "Level 3",
          checked: true if "GCE A Level" in data.selectedQualification or "GCE AS Level" in data.selectedQualification,
          hint: {
            text: "A/AS level or advanced apprenticeship"
          }
        },
        {
          value: "Level 4",
          text: "Level 4",
          hint: {
            text: "Certificate of higher education (CertHE) or higher apprenticeship"
          }
        },
        {
          value: "Level 5",
          text: "Level 5",
          hint: {
            text: "Diploma of higher education (DipHE) or foundation degree"
          }
        },
        {
          value: "Level 6",
          text: "Level 6",
          hint: {
            text: "Degree apprenticeship, degree with honours, graduate certificate or graduate diploma"
          }
        },
        {
          value: "Level 7",
          text: "Level 7",
          hint: {
            text: "Master’s degree, postgraduate certificate or postgraduate diploma"
          }
        },
        {
          value: "Level 8",
          text: "Level 8",
          _hint: {
            text: "Master’s degree, postgraduate certificate or postgraduate diploma"
          }
        },
        {
          divider: "or"
        },
        {
          value: "I don't know the level",
          text: "I don't know the level",
          behaviour: "exclusive"
        }
      ]
    } | decorateAttributes(data, "data.selectedLevel")) }}

  {% endif %}

  <div class="govuk-button-group">
    {{ govukButton({
      text: "Continue"
    }) }}
    <a class="govuk-link" href="./">Cancel</a>
  </div>

{% endblock %}
