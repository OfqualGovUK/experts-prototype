{% set qualTypeHtml %}
  {% if data.resultQualType == "Other qualification type" %}
    {% if data.selectedQualification == "A qualification type that isn't listed" %}
      {{ data.selectedQualificationOther }}
    {% else %} 
      {{ data.selectedQualification }}
    {% endif %}
  {% else %}
    {{ data.resultQualType }}
  {% endif %}
{% endset %}

{% set qualTypeSectorHtml %}
  {% if data.selectedQualificationSector == "A qualification type that isn't listed" %}
    {{ data.selectedQualificationOther }}
  {% else %} 
    {{ data.selectedQualificationSector }}
  {% endif %}
{% endset %}

{% set qualTypeAssessmntOnlyHtml %}
  {% if data.selectedQualificationAssessmntOnly == "A qualification type that isn't listed" %}
    {{ data.selectedQualificationOther }}
  {% else %} 
    {{ data.selectedQualificationAssessmntOnly }}
  {% endif %}
{% endset %}

{% set levelHtml %}
  {% if data.resultQualType == "Other qualification type" %}
    <ul class="govuk-list">
      {# loops through and gets all the checked items  #}
      {% for level in data.selectedLevel %}
        <li>
          {% if level == "A qualification level that isn't listed" %}
            {{ data.selectedLevelOther }}
          {% else %} 
            {{ level }}
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    {{ data.resultLevel }}
  {% endif %}
{% endset %}

{% set levelSectorHtml %}
  <ul class="govuk-list">
    {# loops through and gets all the checked items  #}
    {% for level in data.selectedLevelSector %}
      <li>
        {% if level == "A qualification level that isn't listed" %}
          {{ data.selectedLevelOther }}
        {% else %} 
          {{ level }}
        {% endif %}
      </li>
    {% endfor %}
  </ul>
{% endset %}

{% set levelAssessmentOnlyHtml %}
  <ul class="govuk-list">
    {# loops through and gets all the checked items  #}
    {% for level in data.selectedLevelAssessmntOnly %}
      <li>
        {% if level == "A qualification level that isn't listed" %}
          {{ data.selectedLevelOther }}
        {% else %} 
          {{ level }}
        {% endif %}
      </li>
    {% endfor %}
  </ul>
{% endset %}

{% set assessmentSubjectHtml %}
  {{ data.assessmentSubject }}
{% endset %}

{% set assessmentQualHtml %}
  {{ data.assessmentQual }}
{% endset %}

{% set expertiseTypeHtml %}
  {# If at least one item has been checked, display the selections #}
  {% if data.hasMultipleExpertiseTypes %}
    {# multiple #}
    {% if data.referrer == "subjectSearch" %}
      <ul class="govuk-list">
        {# loops through and gets al the checked items  #}
        {% for type in data.expertiseType %}
          <li>
            {{ type }}
          </li>
        {% endfor %}
      </ul>
    {% endif %}
    
    {% if data.referrer == "sectorSearch" %}
      <ul class="govuk-list">
        {# loops through and gets al the checked items  #}
        {% for type in data.expertiseTypeSector %}
          <li>
            {{ type }}
          </li>
        {% endfor %}
      </ul>
    {% endif %}
  {% endif %}

  {# Todo: not sure if we even need this now #}
  {# If only one type of expertise is selected #}
  {% if not data.hasMultipleExpertiseTypes %}
    {# single #}
    {% if data.anyAssessmentExpertise == "Yes" %}
      Assessment
    {% elseif data.anyIndustryExpertise == "Yes" %}
      Industry or occupational
    {% elseif data.anyTeachingExpertise == "Yes" %}
      Teaching, lecturing or training
    {% endif %}
  {% endif %}
{% endset %}

{# If assessment only expertise  #}
{% if data.assessmentOnlyExpertise %}
  {% if data.assessmentSubject == "Yes" %}
    {{ xGovukSummaryCard({
        rows: [
          {
            key: {
              text: "Does your assessment expertise relate to a subject or sector?"
            },
            value: { 
              html: assessmentSubjectHtml
            },
            actions: {
              items: [{
                text: "Change",
                visuallyHiddenText: "Does your assessment expertise relate to a subject or sector?",
                href: "/application/search/assessment-subject"
              }]
            }
          }
        ]
      }) }}
      {% else %}
      {{ xGovukSummaryCard({
        rows: [
          {
            key: {
              text: "Does your assessment expertise relate to a subject or sector?"
            },
            value: { 
              html: assessmentSubjectHtml
            },
            actions: {
              items: [{
                text: "Change",
                visuallyHiddenText: "Does your assessment expertise relate to a subject or sector?",
                href: "/application/search/assessment-subject"
              }]
            }
          },
          {
            key: {
              text: "Does your assessment expertise relate to specific qualifications?"
            },
            value: { 
              html: assessmentQualHtml 
            },
            actions: {
              items: [{
                text: "Change",
                visuallyHiddenText: "Does your assessment expertise relate to specific qualifications?",
                href: "/application/search/assessment-qualifications"
              }]
            }
          }
        ]
      }) }}
    {% endif %}
  {% endif %}

{# If it is a subjects, apprenticeships or T Level  #}
{% if data.selectedSubject %}
  {{ xGovukSummaryCard({
    titleText: data.selectedSubject,
    actions: {
      items: [{
        text: "Delete choice",
        visuallyHiddenText: data.selectedSubject,
        href: "/application/search/delete?delete=" + data.selectedSubject
      }]
    },
    rows: [
      {
        key: {
          text: "Subjects, apprenticeship or T Level"
        },
        value: { 
          html: data.resultName
        },
        actions: {
          items: [{
            text: "Change",
            visuallyHiddenText: "Subjects, apprenticeship or T Level",
            href: "/application/search/subject-search?referrer=subjectSearch"
          }]
        }
      },
      {
        key: {
          text: "Qualification type"
        },
        value: { 
          html: qualTypeHtml
        },
        actions: {
          items: [{
            text: "Change",
            visuallyHiddenText: "Qualification type",
            href: "/application/search/select-qualification?referrer=subjectSearch"
          }]
        } if data.resultQualType == "Other qualification type"
      },
      {
        key: {
          text: "Qualification level"
        },
        value: { 
          html: levelHtml
        },
        actions: {
          items: [{
            text: "Change",
            visuallyHiddenText: "Qualification level",
            href: "/application/search/select-level?referrer=subjectSearch"
          }]
        } if data.resultQualType == "Other qualification type"
      },
      {
        key: {
          text: "What best describes your type of expertise for this subject?"
        },
        value: { 
          html: expertiseTypeHtml
        },
        actions: {
          items: [{
            text: "Change",
            visuallyHiddenText: "what best describes your type of expertise for this subject?",
            href: "/application/search/select-expertise-type?referrer=subjectSearch"
          }]
        } 
      } if data.hasMultipleExpertiseTypes,
      {
      key: {
        text: "Provide details of your expertise"
      },
      value: { 
        text: data.subjectExpertiseDetails
      },
      actions: {
        items: [{
          text: "Change",
          visuallyHiddenText: "Provide details of your expertise",
          href: "/application/search/add-details?referrer=subjectSearch"
        }]
      }
    }
    ]
  }) }}
{% endif %}

{# If a sector or industry has been selected  #}
{% if data.selectedIndustry %}
  {{ xGovukSummaryCard({
    titleText: data.selectedIndustry,
    actions: {
      items: [{
        text: "Delete choice",
        visuallyHiddenText: data.selectedIndustry,
        href: "/application/search/delete?delete=" + data.selectedIndustry
      }]
    },
    rows: [
      {
        key: {
          text: "Sector"
        },
        value: { 
          html: data.selectedIndustry
        },
        actions: {
          items: [{
            text: "Change",
            visuallyHiddenText: "type of expertise",
            href: "/application/search/sector-search?referrer=sectorSearch"
          }]
        }
      },
      {
        key: {
          text: "Qualification type"
        },
        value: { 
          html: qualTypeSectorHtml
        },
        actions: {
          items: [{
            text: "Change",
            visuallyHiddenText: "Qualification type",
            href: "/application/search/select-qualification?referrer=sectorSearch"
          }]
        }
      },
      {
        key: {
          text: "Qualification level"
        },
        value: { 
          html: levelSectorHtml 
        },
        actions: {
          items: [{
            text: "Change",
            visuallyHiddenText: "Qualification level",
            href: "/application/search/select-level?referrer=sectorSearch"
          }]
        }
      },
      {
        key: {
          text: "What best describes your type of expertise for this subject?"
        },
        value: { 
          html: expertiseTypeHtml
        },
        actions: {
          items: [{
            text: "Change",
            visuallyHiddenText: "what best describes your type of expertise for this subject?",
            href: "/application/search/select-expertise-type?referrer=sectorSearch"
          }]
        }
      } if data.hasMultipleExpertiseTypes,
      {
      key: {
        text: "Provide details of your expertise"
      },
      value: { 
        text: data.sectorExpertiseDetails
      },
      actions: {
        items: [{
          text: "Change",
          visuallyHiddenText: "Provide details of your expertise",
          href: "/application/search/add-details?referrer=sectorSearch"
        }]
      }
    }
    ]
  }) }}
{% endif %}

{# If assessment only  #}
{% if (data.assessmentOnlyExpertise) %}
  {% if data.assessmentSubject == "No" %}
    {# If assessment only, subject/sector route - covered in the subject and sector if statements above #}

    {# If assessment only, qual only route  #}
    {% if data.assessmentQual == "Yes" %}
      
      {{ xGovukSummaryCard({
        actions: {
          items: [{
            text: "Delete choice",
            href: "/application/search/delete?delete=" + data.selectedSubject
          }]
        },
        rows: [
          {
            key: {
              text: "Qualification type"
            },
            value: { 
              html: qualTypeAssessmntOnlyHtml
            },
            actions: {
              items: [{
                text: "Change",
                visuallyHiddenText: "Qualification type",
                href: "/application/search/select-qualification?referrer=assessmentQualOnly"
              }]
            }
          },
          {
            key: {
              text: "Qualification level"
            },
            value: { 
              html: levelAssessmentOnlyHtml 
            },
            actions: {
              items: [{
                text: "Change",
                visuallyHiddenText: "Qualification level",
                href: "/application/search/select-level?referrer=assessmentQualOnly"
              }]
            }
          },
          {
          key: {
            text: "Provide details of your expertise"
          },
          value: { 
            text: data.subjectExpertiseDetails
          },
          actions: {
            items: [{
              text: "Change",
              visuallyHiddenText: "Provide details of your expertise",
              href: "/application/search/add-details?referrer=assessmentQualOnly"
            }]
          }
        }
        ]
      }) }}
    {% endif %}
  {% endif %}
{% endif %}