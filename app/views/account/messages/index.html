{% extends "_templates/page-template.html" %}

{% set pageHeading = "Messages" %}
{% set backLink = "false" %}
{% set primaryNavActive = "Messages" %}
{% set pageType = "Account" %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      {% if data.referrer == "success" %}
        {% from "govuk/components/notification-banner/macro.njk" import govukNotificationBanner %}
        {% set html %}
          <h3 class="govuk-notification-banner__heading">
            Your message has been sent.
          </h3>
        {% endset %}
        {{ govukNotificationBanner({
          html: html,
          type: 'success'
        }) }}
        {% else %}
      {% endif %}
    </div>
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-l">{{ pageHeading }}</h1>
    </div>
    <!-- Inbox taken, and edited, from example in Personal tax account -->
    <div class="govuk-button-group govuk-grid-column-one-third govuk-!-display-block">
      {{ govukButton({
        text: "Send a message",
        href: "/account/messages/send-message",
        classes: "govuk-!-margin-right-0 govuk-button--secondary messages--send-button"
      }) }}
    </div>
    <div class="govuk-grid-column-full">
      <table id="messages-table" class="table--borderless partial-highlight govuk-table">
        <thead class="govuk-table__head">
          <tr class="govuk-table__row">
            <th scope="col" class="govuk-table__header"><span class="govuk-visually-hidden govuk-body">Message status</span></th>
            <th scope="col" class="govuk-table__header">Subject</th>
            <th scope="col" class="messages--govuk-table__cell_last" width="120">Date</th>
          </tr>
        </thead>
        <tbody class="govuk-table__body">
          {% if data.messageSent == "sent" %}
          <tr class="govuk-table__row clickable-row message read">
            <!-- status -->
            <td class="govuk-table__cell messages--govuk-table__cell messages--marker-column">
              <div>&nbsp;</div>
            </td>
            <!-- sender -->
            <td class="govuk-table__cell messages--govuk-table__cell">
              <div class="message read message-subject govuk-body govuk-!-margin-bottom-1">
                <h2 class="govuk-heading-m govuk-!-font-weight-regular govuk-!-margin-bottom-1">
                  <a href="/account/messages/message-sent" class="no--underline message-subject govuk-link" data-sso="false" lang="en">
                    {{ data.accountMessageSubject }}
                  </a>
                </h2>
              </div>
            </td>
            <!-- date -->
            <td valign="top" class="messages--govuk-table__cell_last bold">
              {{ data.tDate }}
              <div>&nbsp;</div>
            </td>
          </tr>
          {% else %}
          {% endif %}
          <tr class="govuk-table__row clickable-row message unread govuk-!-font-weight-bold">
            <!-- status -->
            <td class="govuk-table__cell messages--govuk-table__cell messages--marker-column">
              <span class="messages--marker-column__marker messages--message-status-marker">Unread</span>
              <div>&nbsp;</div>
            </td>
            <!-- sender -->
            <td class="govuk-table__cell messages--govuk-table__cell">
              {% if data.subjectEvidenceReply == "replied" %}
                <div class="message read message-subject govuk-body govuk-!-margin-bottom-1">
                  <p class="govuk-body-s govuk-!-margin-bottom-1">You replied 1 Mar 2023</p>
                </div>
                {% else %}
              {% endif %}
              <div class="message unread message-subject govuk-body govuk-!-margin-bottom-1">
                <h2 class="govuk-heading-m govuk-!-margin-bottom-1">
                  <a href="/account/messages/further-evidence-required" class="govuk-!-font-weight-bold no--underline message-subject govuk-link" data-sso="false" lang="en">
                    Further evidence needed for your subject experience
                  </a>
                </h2>
              </div>
              
            </td>
            <!-- date -->
            <td valign="top" class="messages--govuk-table__cell_last bold">
              24 Feb 2023
              <div>&nbsp;</div>
            </td>
          </tr>
          <tr class="govuk-table__row clickable-row message read">
            <!-- status -->
            <td valign="top" class="govuk-table__cell messages--govuk-table__cell messages--marker-column">
              <div>&nbsp;</div>
            </td>
            <!-- sender -->
            <td class="govuk-table__cell messages--govuk-table__cell">
              <div class="message read message-subject govuk-body govuk-!-margin-bottom-1">
                {% if data.proofNameChangeReply == "replied" %}
                  <p class="govuk-body-s govuk-!-margin-bottom-1">You replied 15 Feb 2023</p>
                {% else %}
                  <p class="govuk-body-s govuk-!-margin-bottom-1 ">You replied 12 Feb 2023</p>
                {% endif %}
              </div>
              <div class="message read message-subject govuk-body govuk-!-margin-bottom-1">
                <h2 class="govuk-heading-m govuk-!-font-weight-regular govuk-!-margin-top-1">
                  <a href="/account/messages/name-change-proof" class="no--underline message-subject govuk-link" data-sso="false" lang="en">
                    Proof of name change required
                  </a>
                </h2>
              </div>
            </td>
            <!-- date -->
            <td valign="top" class="messages--govuk-table__cell_last ">
              10 Feb 2023
              <div>&nbsp;</div>
            </td>
          </tr>
          <tr class="govuk-table__row clickable-row message read">
            <!-- status -->
            <td class="govuk-table__cell messages--govuk-table__cell messages--marker-column">
              <div>&nbsp;</div>
            </td>
            <!-- sender -->
            <td class="govuk-table__cell messages--govuk-table__cell">
              <div class="message read message-subject govuk-body govuk-!-margin-bottom-1">
                <h2 class="govuk-heading-m govuk-!-font-weight-regular govuk-!-margin-bottom-1s">
                  <a href="/account/messages/application-received" class="black-text no--underline message-subject govuk-link" data-sso="false" lang="en">
                    Application received
                  </a>
                </h2>
              </div>
            </td>
            <!-- date -->
            <td valign="top" class="messages--govuk-table__cell_last ">
              8 Feb 2023
              <div>&nbsp;</div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
{% endblock %}